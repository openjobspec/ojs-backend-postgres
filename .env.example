# OJS Backend PostgreSQL - Environment Variables
# Copy to .env and adjust values as needed.

# Server
OJS_PORT=8080

# gRPC
OJS_GRPC_PORT=9090

# Database
# Generate a strong password first (example: openssl rand -base64 24)
DATABASE_URL=postgres://ojs:REPLACE_WITH_STRONG_PASSWORD@localhost:5432/ojs?sslmode=prefer

# Authentication
# Set a strong API key for any shared/non-local environment.
OJS_API_KEY=REPLACE_WITH_LONG_RANDOM_API_KEY
# ┌─────────────────────────────────────────────────────────────────────┐
# │ ⚠️  SECURITY WARNING                                               │
# │                                                                     │
# │ OJS_ALLOW_INSECURE_NO_AUTH disables ALL authentication.             │
# │ This is intended ONLY for local development and testing.            │
# │                                                                     │
# │ In production, ALWAYS set OJS_API_KEY to a strong random value      │
# │ and keep OJS_ALLOW_INSECURE_NO_AUTH=false (the default).            │
# │                                                                     │
# │ Running without authentication in production exposes your job       │
# │ server to unauthorized access, data exfiltration, and denial        │
# │ of service attacks.                                                 │
# └─────────────────────────────────────────────────────────────────────┘
OJS_ALLOW_INSECURE_NO_AUTH=false

# HTTP Timeouts (Go duration format: 30s, 2m, etc.)
OJS_READ_TIMEOUT=30s
OJS_WRITE_TIMEOUT=30s
OJS_IDLE_TIMEOUT=120s
OJS_SHUTDOWN_TIMEOUT=30s

# Connection Pool
OJS_POOL_MIN_CONNS=2
OJS_POOL_MAX_CONNS=20

# Scheduler Intervals (Go duration format)
OJS_SCHEDULER_PROMOTE_INTERVAL=1s
OJS_SCHEDULER_RETRY_INTERVAL=200ms
OJS_SCHEDULER_REAPER_INTERVAL=500ms
OJS_SCHEDULER_CRON_INTERVAL=10s
OJS_SCHEDULER_PRUNER_INTERVAL=60s

# Retention (days)
OJS_RETENTION_COMPLETED_DAYS=7
OJS_RETENTION_DISCARDED_DAYS=30

# Default Visibility Timeout (milliseconds)
OJS_DEFAULT_VISIBILITY_TIMEOUT_MS=30000
